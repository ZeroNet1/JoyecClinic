<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชูุงุตูู ุงูุฌูุณุฉ - ูุฑูุฒ ุงูุชุฌููู</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="session-details.css">
</head>
<body>
    <div class="header">
        <h1 id="pageTitle">ุชูุงุตูู ุงูุฌูุณุฉ</h1>
        <div class="user-info">
            <span id="userName"></span>
            <div class="header-actions">
                <button onclick="window.location.href='doctor-page.html'" class="back-btn">ุฑุฌูุน</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- ูุนูููุงุช ุงูุฌูุณุฉ -->
        <div class="session-info-section">
            <h2>ูุนูููุงุช ุงูุฌูุณุฉ</h2>
            <div id="sessionInfo">
                <!-- ุณูุชู ููุคูุง ุจุงูุจูุงูุงุช -->
            </div>
        </div>

        <!-- ุฅุฌุฑุงุกุงุช ุงูุฌูุณุฉ -->
        <div class="session-actions-section">
            <h2>ุฅุฌุฑุงุกุงุช ุงูุฌูุณุฉ</h2>
            <div class="action-buttons">
                <button class="action-btn primary" onclick="showAddServiceModal()">
                    <span class="action-icon">โ</span>
                    <span>ุฅุถุงูุฉ ุฎุฏูุฉ</span>
                </button>
                
                <button class="action-btn secondary" onclick="showInventoryModal()">
                    <span class="action-icon">๐ฆ</span>
                    <span>ุงููุฎุฒูู</span>
                </button>
                
                <button class="action-btn success" onclick="showSessionReportModal()">
                    <span class="action-icon">๐</span>
                    <span>ุชูุงุตูู ุงูุนูููุฉ</span>
                </button>
                
                <button class="action-btn danger" onclick="endSession()">
                    <span class="action-icon">โน๏ธ</span>
                    <span>ุฅููุงุก ุงูุฌูุณุฉ</span>
                </button>
            </div>
        </div>

        <!-- ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ -->
        <div class="additional-services-section">
            <h2>ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ</h2>
            <div id="additionalServicesList">
                <!-- ุณูุชู ููุคูุง ุจุงูุฎุฏูุงุช -->
            </div>
        </div>

        <!-- ุงูููุชุฌุงุช ุงููุณุชุฎุฏูุฉ -->
        <div class="used-products-section">
            <h2>ุงูููุชุฌุงุช ุงููุณุชุฎุฏูุฉ</h2>
            <div id="usedProductsList">
                <!-- ุณูุชู ููุคูุง ุจุงูููุชุฌุงุช -->
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุฅุถุงูุฉ ุฎุฏูุฉ -->
    <div id="addServiceModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>โ ุฅุถุงูุฉ ุฎุฏูุฉ ุฅุถุงููุฉ</h3>
                <button class="close-btn" onclick="hideAddServiceModal()">โ</button>
            </div>
            <div class="modal-body">
                <form id="addServiceForm">
                    <div class="form-group">
                        <label for="additionalService">ุงูุฎุฏูุฉ ุงูุฅุถุงููุฉ:</label>
                        <select id="additionalService" required>
                            <option value="">ุงุฎุชุฑ ุงูุฎุฏูุฉ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalPrice">ุงูุณุนุฑ ุงูุฅุถุงูู (ุฌููู):</label>
                        <input type="number" id="additionalPrice" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalNotes">ููุงุญุธุงุช:</label>
                        <textarea id="additionalNotes" rows="3" placeholder="ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ ุนู ุงูุฎุฏูุฉ..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="save-btn" onclick="addAdditionalService()">ุฅุถุงูุฉ ุงูุฎุฏูุฉ</button>
                <button type="button" class="cancel-btn" onclick="hideAddServiceModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุงููุฎุฒูู -->
    <div id="inventoryModal" class="modal hidden">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>๐ฆ ุงุณุชุฎุฏุงู ููุชุฌ ูู ุงููุฎุฒูู</h3>
                <button class="close-btn" onclick="hideInventoryModal()">โ</button>
            </div>
            <div class="modal-body">
                <div class="inventory-filters">
                    <input type="text" id="inventorySearch" placeholder="๐ ุงุจุญุซ ุนู ููุชุฌ..." class="search-input">
                </div>
                
                <div class="inventory-list" id="inventoryList">
                    <!-- ุณูุชู ููุคูุง ุจุงูููุชุฌุงุช -->
                </div>
                
                <div class="selected-product hidden" id="selectedProductSection">
                    <h4>ุงูููุชุฌ ุงููุฎุชุงุฑ</h4>
                    <div class="product-info" id="selectedProductInfo"></div>
                    
                    <div class="quantity-controls">
                        <label for="useQuantity">ุงููููุฉ ุงููุณุชุฎุฏูุฉ:</label>
                        <input type="number" id="useQuantity" min="1" value="1">
                        <span id="currentStockInfo"></span>
                    </div>
                    
                    <div class="product-actions">
                        <button class="save-btn" onclick="useProductFromInventory()">ุงุณุชุฎุฏุงู ุงูููุชุฌ</button>
                        <button class="cancel-btn" onclick="clearSelectedProduct()">ุฅูุบุงุก</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุชูุงุตูู ุงูุนูููุฉ -->
    <div id="sessionReportModal" class="modal hidden">
        <div class="modal-content x-large">
            <div class="modal-header">
                <h3>๐ ุชูุงุตูู ุงูุนูููุฉ</h3>
                <button class="close-btn" onclick="hideSessionReportModal()">โ</button>
            </div>
            <div class="modal-body">
                <form id="sessionReportForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="patientName">ุงุณู ุงูุนูููุฉ:</label>
                            <input type="text" id="patientName" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label for="patientPhone">ุฑูู ุงูุชููููู:</label>
                            <input type="text" id="patientPhone" readonly>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sessionDate">ุงูุชุงุฑูุฎ:</label>
                            <input type="date" id="sessionDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="sessionTime">ุงูููุช:</label>
                            <input type="time" id="sessionTime" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sessionNumber">ุฑูู ุงูุฌูุณุฉ:</label>
                            <input type="text" id="sessionNumber" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="sessionType">ููุน ุงูุฌูุณุฉ:</label>
                            <input type="text" id="sessionType" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pulseCount">ุนุฏุฏ ุงููุจุถุงุช:</label>
                            <input type="number" id="pulseCount" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label for="power">Power:</label>
                            <input type="text" id="power" placeholder="ูุซุงู: 2.5 J/cmยฒ">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pulseDuration">Puls Duration:</label>
                            <input type="text" id="pulseDuration" placeholder="ูุซุงู: 3 ms">
                        </div>
                        
                        <div class="form-group">
                            <label for="spotSize">Spot Size:</label>
                            <input type="text" id="spotSize" placeholder="ูุซุงู: 8mm">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="skinType">Skin Type:</label>
                        <select id="skinType">
                            <option value="">ุงุฎุชุฑ ููุน ุงูุจุดุฑุฉ</option>
                            <option value="I">Type I - Very fair</option>
                            <option value="II">Type II - Fair</option>
                            <option value="III">Type III - Medium</option>
                            <option value="IV">Type IV - Olive</option>
                            <option value="V">Type V - Brown</option>
                            <option value="VI">Type VI - Black</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sessionNotes">ููุงุญุธุงุช ุฅุถุงููุฉ:</label>
                        <textarea id="sessionNotes" rows="4" placeholder="ุฃู ููุงุญุธุงุช ุฅุถุงููุฉ ุนู ุงูุฌูุณุฉ..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="print-btn" onclick="printSessionReport()">๐จ๏ธ ุทุจุงุนุฉ ุงูุชูุฑูุฑ</button>
                <button type="button" class="save-btn" onclick="saveSessionReport()">๐พ ุญูุธ ุงูุชูุฑูุฑ</button>
                <button type="button" class="cancel-btn" onclick="hideSessionReportModal()">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <script type="module" src="session-details.js"></script>
</body>
</html>