<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>إدارة العملاء - مركز التجميل</title>

<style>
    :root{
        --primary-1:#667eea;
        --primary-2:#764ba2;
        --accent:#ffc2d1;
        --success:#28a745;
        --muted:#6c757d;
        --bg:#f5f7fa;
        --card:#ffffff;
        --text:#1f2937;
        --radius:12px;
        --gap:18px;
        --container-max:1200px;
        --btn-height:44px;
    }

    /* Reset */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:0}
    body{
        font-family: "Segoe UI", Tahoma, Arial, "Noto Naskh Arabic", sans-serif;
        background:var(--bg);
        color:var(--text);
        direction:rtl;
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
        line-height:1.5;
        min-height:100vh;
        display:flex;
        flex-direction:column;
    }

    /* Header */
    .header{
        background:linear-gradient(135deg,var(--primary-1) 0%, var(--primary-2) 100%);
        color:#fff;
        padding: clamp(12px,2.6vw,20px);
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:12px;
        box-shadow:0 8px 24px rgba(103, 86, 204, 0.12);
        position:sticky;
        top:0;
        z-index:60;
        flex-wrap:wrap;
    }
    .header h1{margin:0;font-size:clamp(18px,2.6vw,22px)}
    .user-info{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .user-name-badge{
        background:rgba(255,255,255,0.12);
        padding:8px 12px;border-radius:999px;font-weight:700;font-size:14px;
    }
    .header-actions{display:flex;gap:10px;flex-wrap:wrap}

    /* Buttons unified */
    .btn{
        height:var(--btn-height);
        padding:0 16px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        gap:8px;
        border-radius:10px;
        border:none;
        cursor:pointer;
        font-weight:700;
        font-size:14px;
        transition:transform .14s ease, box-shadow .14s ease, background .14s ease;
        background: rgba(255,255,255,0.12);
        color: #fff;
    }
    .btn:hover{transform:translateY(-3px); box-shadow:0 8px 20px rgba(0,0,0,0.12)}
    .btn.ghost{ background: transparent; border: 1px solid rgba(255,255,255,0.14) }
    .btn.primary{ background: linear-gradient(90deg,var(--primary-1),var(--primary-2)); color:#fff }
    .btn.secondary{ background:#fff; color:var(--primary-2); box-shadow:none }

    /* Layout */
    main{flex:1;display:flex;justify-content:center;padding:20px 12px}
    .container{
        width:100%;
        max-width:var(--container-max);
        display:grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap:var(--gap);
        align-items:start;
    }

    /* Card */
    .card{
        background:var(--card);
        border-radius:var(--radius);
        padding: clamp(14px,2.4vw,22px);
        box-shadow: 0 8px 30px rgba(6, 12, 34, 0.06);
    }

    /* form */
    .form-section h2, .stats-section h2{
        margin:0 0 14px 0;
        font-size:clamp(16px,2.2vw,18px);
        font-weight:800;
        color:var(--text);
        border-bottom:3px solid var(--primary-1);
        padding-bottom:10px;
    }

    .input-group{ margin-bottom:12px; display:flex; flex-direction:column; gap:8px }
    label{ font-weight:700; font-size:14px; color:var(--text) }
    input[type="text"], input[type="tel"], input[type="number"], select {
        padding:10px 12px; border-radius:10px; border:1.5px solid #e8eaf6;
        background:#fbfcff; font-size:15px; color:var(--text);
        transition:box-shadow .12s ease, border-color .12s ease;
    }
    input:focus, select:focus { outline:none; border-color:var(--primary-1); box-shadow:0 6px 18px rgba(102,126,234,0.08) }

    /* Balance cards */
    .balance-options{ background:#fbfcff; padding:12px; border-radius:10px; border:1px solid #eef2ff; margin:10px 0 }
    .balance-type-card{ border-radius:10px; padding:10px; border:1px solid #eef2ff; margin-bottom:10px; display:flex; flex-direction:column; gap:8px; transition:transform .12s ease, border-color .12s ease }
    .balance-type-card:hover{ transform:translateX(-2px); border-color:var(--primary-1) }

    .balance-type-header{ display:flex; align-items:center; gap:12px }
    .balance-checkbox{ width:18px; height:18px; accent-color:var(--primary-1) }
    .balance-type-label{ display:flex; align-items:center; gap:10px; font-weight:700; color:var(--text) }
    .balance-icon{ font-size:18px }

    .balance-desc{ font-size:13px; color:var(--muted); margin-inline-start:32px } /* unified description */
    .balance-input-group{ display:flex; align-items:center; gap:8px; padding-inline-start:6px }
    .balance-input{ flex:1; padding:8px 10px; border-radius:8px; border:1.5px solid #e8eaf6; font-weight:700; color:var(--success); background:#fbfcff }
    .currency{ font-weight:700; color:#444 }

    .hidden{ display:none !important }

    /* Form actions */
    .form-actions{ display:flex; gap:12px; margin-top:12px; flex-wrap:wrap; align-items:center }
    .save-btn{ background:linear-gradient(90deg,var(--success), #20c997); color:#fff; height:var(--btn-height); border-radius:10px; padding:0 14px; font-weight:800 }
    .view-customers-btn{ background:#6c757d; color:#fff; height:var(--btn-height); border-radius:10px; padding:0 14px; font-weight:800 }

    /* message */
    .message{ margin-top:12px; padding:10px 12px; border-radius:10px; display:none; font-weight:700; text-align:center }
    .message.success{ background:#dff0df; color:#136034; display:block; border:1px solid #c3e6cb }
    .message.error{ background:#fbeaec; color:#7a1a1a; display:block; border:1px solid #f5c6cb }

    /* stats */
    .stats-grid{ display:grid; gap:12px; grid-template-columns: repeat(auto-fit,minmax(140px,1fr)); margin-bottom:12px }
    .stat-card{ background:linear-gradient(180deg,#fff,#fbfdff); padding:14px; border-radius:10px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px; min-height:110px; border-right:4px solid var(--primary-1) }
    .stat-icon{ font-size:26px }
    .stat-number{ font-size:22px; font-weight:900; color:var(--primary-1) }
    .stat-label{ font-weight:700; color:var(--muted); font-size:13px }

    .quick-actions{ margin-top:8px }
    .action-btn{ width:100%; background:linear-gradient(90deg,var(--primary-1),var(--primary-2)); color:#fff; padding:12px; border-radius:10px; font-weight:800 }

    /* responsive */
    @media (max-width:1100px){
        .container{ grid-template-columns: 1fr; gap:14px }
    }
    @media (max-width:520px){
        .balance-desc{ margin-inline-start: 0; margin-top:6px }
        .balance-input-group{ flex-direction:column; align-items:stretch; gap:8px }
        .header{ padding:12px }
        .btn{ font-size:13px; height:40px }
    }

    /* focus / accessibility */
    :focus{ outline-offset:3px }
    button:focus, input:focus, select:focus { outline: 3px solid rgba(102,126,234,0.12); border-color:var(--primary-1) }

    /* print */
    @media print{
        .header-actions, .form-actions, .quick-actions, .message { display:none }
        .container{ grid-template-columns:1fr; padding:0 }
    }
</style>
</head>
<body>

<header class="header" role="banner">
    <h1>إدارة العملاء</h1>
    <div class="user-info" role="navigation" aria-label="معلومات المستخدم">
        <div id="userName" class="user-name-badge">المستخدم</div>

        <div class="header-actions" aria-hidden="false">
            <button class="btn ghost" onclick="window.location.href='customer-list.html'">قائمة العملاء</button>
            <button class="btn ghost" onclick="window.location.href='../main.html'">الرئيسية</button>
        </div>
    </div>
</header>

<main>
    <div class="container">
        <!-- form -->
        <section class="card form-section" aria-labelledby="addCustomerTitle">
            <h2 id="addCustomerTitle">📝 تسجيل عميل جديد</h2>

            <form id="addCustomerForm" autocomplete="off" novalidate>
                <div class="input-group">
                    <label for="customerName">الاسم الكامل:</label>
                    <input type="text" id="customerName" required placeholder="أدخل الاسم الكامل">
                </div>

                <div class="input-group">
                    <label for="customerPhone">رقم الهاتف:</label>
                    <input type="tel" id="customerPhone" required placeholder="مثال: 01012345678">
                </div>

                <div class="balance-options" aria-labelledby="balanceTitle">
                    <h3 id="balanceTitle">💰 الرصيد المبدئي (اختياري)</h3>

                    <!-- normal -->
                    <div class="balance-type-card">
                        <div class="balance-type-header">
                            <input type="checkbox" id="enableNormalBalance" class="balance-checkbox" />
                            <label for="enableNormalBalance" class="balance-type-label">
                                <span class="balance-icon">💵</span>
                                <span>الرصيد الأساسي</span>
                            </label>
                        </div>
                        <div class="balance-desc">يمكن استخدامه لجميع الخدمات وتحويله لأي فئة</div>
                        <div class="balance-input-group hidden" id="normalBalanceGroup">
                            <input type="number" id="customerBalance" class="balance-input" step="0.01" min="0" placeholder="0.00" />
                            <div class="currency">جنيه</div>
                        </div>
                    </div>

                    <!-- offers -->
                    <div class="balance-type-card offers-card">
                        <div class="balance-type-header">
                            <input type="checkbox" id="enableOffersBalance" class="balance-checkbox" />
                            <label for="enableOffersBalance" class="balance-type-label">
                                <span class="balance-icon">💰</span>
                                <span>رصيد العروض</span>
                            </label>
                        </div>
                        <div class="balance-desc">مخصص للعروض الترويجية - يمكن تحويله للرصيد الأساسي</div>
                        <div class="balance-input-group hidden" id="offersBalanceGroup">
                            <input type="number" id="offersBalance" class="balance-input" step="0.01" min="0" placeholder="0.00" />
                            <div class="currency">جنيه</div>
                        </div>
                    </div>

                    <!-- laser -->
                    <div class="balance-type-card laser-card">
                        <div class="balance-type-header">
                            <input type="checkbox" id="enableLaserBalance" class="balance-checkbox" />
                            <label for="enableLaserBalance" class="balance-type-label">
                                <span class="balance-icon">✨</span>
                                <span>رصيد الليزر</span>
                            </label>
                        </div>
                        <div class="balance-desc">مخصص لخدمات الليزر - يمكن تحويله للرصيد الأساسي</div>
                        <div class="balance-input-group hidden" id="laserBalanceGroup">
                            <input type="number" id="laserBalance" class="balance-input" step="0.01" min="0" placeholder="0.00" />
                            <div class="currency">جنيه</div>
                        </div>
                    </div>

                    <!-- derma -->
                    <div class="balance-type-card derma-card">
                        <div class="balance-type-header">
                            <input type="checkbox" id="enableDermaBalance" class="balance-checkbox" />
                            <label for="enableDermaBalance" class="balance-type-label">
                                <span class="balance-icon">🧴</span>
                                <span>رصيد الجلدية</span>
                            </label>
                        </div>
                        <div class="balance-desc">مخصص لخدمات الجلدية - يمكن تحويله للرصيد الأساسي</div>
                        <div class="balance-input-group hidden" id="dermaBalanceGroup">
                            <input type="number" id="dermaBalance" class="balance-input" step="0.01" min="0" placeholder="0.00" />
                            <div class="currency">جنيه</div>
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="customerPaymentMethod">طريقة الدفع الافتراضية:</label>
                    <select id="customerPaymentMethod">
                        <option value="نقدي">نقدي</option>
                        <option value="فيزا">فيزا</option>
                        <option value="محفظة">محفظة</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="submit" class="save-btn">💾 حفظ العميل</button>
                    <button type="button" class="view-customers-btn" onclick="window.location.href='customer-list.html'">👥 قائمة العملاء</button>
                </div>

                <div id="message" role="status" class="message" aria-live="polite"></div>
            </form>
        </section>

        <!-- stats -->
        <aside class="card stats-section" aria-labelledby="statsTitle">
            <h2 id="statsTitle">📊 إحصائيات سريعة</h2>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">👥</div>
                    <div class="stat-number" id="totalCustomers">0</div>
                    <div class="stat-label">إجمالي العملاء</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">⭐</div>
                    <div class="stat-number" id="newCustomers">0</div>
                    <div class="stat-label">عملاء جدد اليوم</div>
                </div>
            </div>

            <div class="quick-actions">
                <button class="action-btn" onclick="window.location.href='customer-list.html'">📋 عرض قائمة العملاء</button>
            </div>
        </aside>
    </div>
</main>

    <script type="module" src="customers.js"></script>
    <script>
        // تفعيل/تعطيل حقول الرصيد عند تحديد الخيارات
        document.addEventListener('DOMContentLoaded', function() {
            const balanceTypes = [
                { checkbox: 'enableNormalBalance', group: 'normalBalanceGroup', input: 'customerBalance' },
                { checkbox: 'enableOffersBalance', group: 'offersBalanceGroup', input: 'offersBalance' },
                { checkbox: 'enableLaserBalance', group: 'laserBalanceGroup', input: 'laserBalance' },
                { checkbox: 'enableDermaBalance', group: 'dermaBalanceGroup', input: 'dermaBalance' }
            ];

            balanceTypes.forEach(type => {
                const checkbox = document.getElementById(type.checkbox);
                const group = document.getElementById(type.group);
                const input = document.getElementById(type.input);

                if (checkbox && group && input) {
                    checkbox.addEventListener('change', function() {
                        if (this.checked) {
                            group.classList.remove('hidden');
                            input.focus();
                        } else {
                            group.classList.add('hidden');
                            input.value = '';
                        }
                    });
                }
            });
        });
    </script>


</body>
</html>
